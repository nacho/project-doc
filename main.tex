% mainfile:main.tex
\synctex=1

\documentclass[a4paper,11pt,twoside]{book}

\usepackage[pdftex]{graphicx}
\usepackage{fancyhdr} % for the headers
\usepackage[Lenny]{fncychap}
\usepackage{eurosym} % for the euro symbol
\usepackage[pagebackref=true]{hyperref} % for hyperlinks
\usepackage{setspace} % margin configuration
\usepackage{url}
\usepackage{wrapfig}
\usepackage{tabularx}
\usepackage{float}
\usepackage{tocbibind} % to show the bibliography in the index

\hypersetup{
    unicode=false,
    pdftoolbar=true,
    pdfmenubar=true,
    pdffitwindow=false,
    pdfstartview={FitH},
    pdftitle={Road to gedit 3.0},
    pdfauthor={Ignacio Casal Quinteiro},
    pdfsubject={},
    pdfcreator={},
    pdfproducer={},
    pdfkeywords={},
    pdfnewwindow=true,
    colorlinks=true,
    linkcolor=blue,
    citecolor=green,
    filecolor=magenta,
    urlcolor=blue
}

\usepackage{color}
\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}

\usepackage{listings}
\lstset{
  frame=Ltb,
  framerule=0pt,
  aboveskip=0.5cm,
  framextopmargin=2.5pt,
  framexbottommargin=2.5pt,
  framexleftmargin=0.4cm,
  framesep=0pt,
  rulesep=.4pt,
  backgroundcolor=\color{gray97},
  rulesepcolor=\color{black},
  tabsize=8,
  %
  stringstyle=\ttfamily,
  showstringspaces = false,
  basicstyle=\small\ttfamily,
  commentstyle=\color{gray45},
  keywordstyle=\bf,
  %
  numbers=left,
  numbersep=15pt,
  numberstyle=\tiny,
  numberfirstline = false,
  breaklines=true
}

% minimize the fragmentation
\lstnewenvironment{listing}[1][]{
  \lstset{#1}\pagebreak[0]}{\pagebreak[0]
}

\lstdefinestyle{GObject}{
  language=C,
  emph={gboolean, gpointer, gconstpointer, gchar, guchar, gint, guint, gshort,
        gushort, glong, gulong, gfloat, gdouble, gsize, gssize, goffset},
  emphstyle=\color{blue}
}

\lstdefinestyle{python}{
  language=python
}

\lstdefinestyle{xml}{
  language=XML
}

\lstdefinestyle{plain}{}

% override the title setting to make it bold
\ChTitleVar{\bf\Huge}

% margin configuration
\onehalfspacing
\setlength\textwidth{15cm}
\setlength\textheight{22cm}
\setlength\oddsidemargin{0.2cm}
\setlength\evensidemargin{0.2cm}

\parskip=6pt
\parindent=10pt

\author{Ignacio Casal Quinteiro}
\title{\textbf{\Huge{Road to gedit 3.0}}}

\begin{document}

%==============================================================
% Custom commands
%==============================================================

% addwrapfigure
\newcommand{\addwrapfigure}[4][\textwidth]{
  \begin{wrapfigure}{#2}{#1}
    \vspace{-20pt}
    \begin{center}
      \includegraphics[width=#1]{#3}
    \end{center}
    \vspace{-20pt}
    \caption{#4}
    \vspace{-20pt}
  \end{wrapfigure}
}

\newcommand{\addfigure}[4][width=\textwidth]{
  \begin{figure}[H]
    \begin{center}
      \includegraphics[#1]{#2}
      \caption[#3]{#3}\label{#4}
    \end{center}
  \end{figure}
}

% make GNOME prettier
\newcommand{\GNOME}{\textsc{Gnome}~}

% graybox
\newcommand{\graybox}[1]{\colorbox{gray75}{#1}}

%===============================================================
%Title
%===============================================================
\include{title}
\newpage\thispagestyle{empty}
\cleardoublepage

%===============================================================
% Dedication
%===============================================================
\include{dedication}
\newpage\thispagestyle{empty}
\cleardoublepage

%===============================================================
% For the headers
%===============================================================
\pagestyle{fancy}
\fancyhf{}
\fancyhf[HR]{\thepage}
\fancyhf[HL]{\nouppercase\rightmark}

%===============================================================
%Index
%===============================================================
\frontmatter

\tableofcontents
\listoffigures
\listoftables
\newpage\thispagestyle{empty}
\cleardoublepage

%===============================================================
% Chapters
%===============================================================
\mainmatter

\part{Memory}
\include{id}
\include{intro}
\include{objectives}
\include{technical-description}
\include{development-process}
\include{technologies}
\include{planning}
\include{budget}
\include{community}
\include{future-features}
\include{problems-found}
\include{conclusions}

\part{Technical manual}
\include{initial-analysis}
\include{gfile}
\include{gsettings}
\include{tab-groups}
\include{dnd}
\include{libpeas}
\chapter{New search system}
\chapter{Encoding conversion}
\chapter{Invalid characters}
\chapter{GtkOverlay}

\part{User manual}
\include{user-tab-groups}
\include{user-search-system}

\appendix
\include{git-workflow}
\include{release}
\include{gsoc}
\include{hackfest}
\include{gnome-3-0-for-app-devs}
\include{gpl}

\nocite{*}
\bibliography{biblio}
\bibliographystyle{plain}

\end{document}
